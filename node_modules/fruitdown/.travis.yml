language: node_js

node_js:
  - stable

git:
  depth: 10

addons:
  sauce_connect: true

before_script:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"

script: npm run $COMMAND

env:
  global:
    - secure: "E+Rk6Xp4PaKZHEliD0d94SSawGj1z0nq+EWYsEdrh43ViSlAiLuJ7fgIkETzskQ9gHQwOj1E2KWoNgovZ8O0y3WnjXf8mVTq3hYf8VnpcRk6RiEeotioOl2TuDZHB5LMkt6rfHgYy7Vnr9OTxfTVp4Fb+3kW4fHQqLAXJcuLQWmWEWjmB6uuxColIQHU9K91ALvjCNXspsmB6rsoNPXurBN9kwvn09pv4YYW7q7u6+u9a5U9X6Iv1KfD1dA6grJT0NVCMmyuXKdUtsubOIvhP/aHtuI8WnRbgLqQLNlKnws0MPP5e4ss4KHELgD4DCX1/fp14H2nO3vbo7YJw1ygDEz6h4lKtI5fRlqZhy7jJ7Rhfx4brLzEe5nVRYgm5fyRzdXS5x3lUpWwYtwe18Wtq5viLIo85OI9K7KdZTCGoiOcPf++Xj/zU9LmBShjmab7RKVg/1mEHSUcjNtpVvqyjGhd7v8pUNO2+9IpcBqZZdE+9V9makl7hmASEa1U1PEwJtTWBsuxcxKFkbqfODdR9WZhOc4xofF/sJIlHUFBoUFoTBKJlvA3HBLRALU7uvWmgWZdCxsaxFkOG1RPACc/n89GoadH1KdJk8MyvoT+LRyfiWLNKbZ9I8ACJIsn8+5WBFL2Kp7SlEutQs78qQcC+zJ957yLpJJfWzoUm02L52w="
    - secure: "PylB410TwQWrj6gUlMgzBizS0LrbdEvEFu04MnHY9nm+wphGgGrOCbxQWjncBbiwOKXG0u292npu9zyAEZy34B8jgU9IcnZRyvCuH2mdBs4gUwqXKn1AfrOD2TPQ0onXk+wzRuBvPUHtnQlH/JaYhcdCiirNrZQR/WlZ+KPgs7p4pl3aeC9z3RhZ1ppOCt2yl/rGmcRrAuSwaQnDhPtY7RZTCpwLRFaEkDwbgFlg2B6VuUTvWAzU3+4oxHoJqDtZ5PxYBVnnVstHJYRuEpW5TgoRiq8XsKF0drhUvcbcuARz2fpVeFa3rrn51pAPnFKO1kkjLSh+UI4MAxjBgNyHB/AIp9bfyWllAUWYTIn4VYMuHIFXhahIARngWwxTR8Pn7eFaFnnusQcQLf7Lz7Bfcx69IvztuTKSUqEqBLLWDaH2LZ+PC3PZw/1H2lkXyUaEvL2svjJMfGfHtj84yr8VliOyibIYOnbBs3wTKMjfmZlLxI1fVcsczlwKZP9HTKYamdjl44RndVxzMlRDIg1qgZCqHD8BiDLLh+vvULRFcZOYxwI8jxFbIJ6MFOrgS3PRmer8ncYZinIsss3Al72MOnvKFkU4Bf9y3305/M8eITibfduB911pt8mBfIZsDQmy9+DnyeZH/dClYM3aV1e1aEiHSHM8BzrcVVxHq6Sp4Ao="

  matrix:
    - BROWSER=firefox COMMAND=test
    - COMMAND=test-fakeindexeddb
    - COMMAND=test-saucelabs BROWSER_NAME=iphone BROWSER_VERSION="8.0..latest"
    - COMMAND=test-saucelabs BROWSER_NAME=safari BROWSER_VERSION="7..latest"
    - COMMAND=test-saucelabs BROWSER_NAME=android BROWSER_VERSION="4.4..latest"
    - COMMAND=test-saucelabs BROWSER_NAME=ie BROWSER_VERSION="10..latest"
    - COMMAND=test-saucelabs BROWSER_NAME=firefox BROWSER_VERSION="38..latest"
    - COMMAND=test-saucelabs BROWSER_NAME=chrome BROWSER_VERSION="42..beta"

